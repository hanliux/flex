<?php
/**
 * Created by PhpStorm.
 * User: wodrow
 * Date: 17-5-7
 * Time: 上午9:43
 */

namespace common\models;
use yii\base\Model;
use yii\db\ActiveRecord;

/**
 * Class UserInfo
 * @package common\models
 *
 * @property UserLevelRule $levelRule
 */
class UserInfo extends \common\models\tables\UserInfo
{
    public function afterFind()
    {
        parent::afterFind(); // TODO: Change the autogenerated stub
        if (!$this->nickname){
            $this->nickname = $this->user->username;
        }
        if (!$this->avatar){
            $this->avatar = substr($this->user->username, 0, 2);
        }
    }

    /**
     * @return array|null| ActiveRecord
     */
    public function getLevelRule()
    {
        $rule = UserLevelRule::find()->where(['and', ['>', 'end', $this->level], ['<=', 'begin', $this->level]])->one();
        return $rule;
    }
}